pipeline {
    agent { label 'Node_1' }
    stages {
        stage('Code Validation') {
            steps {
                sh """
                    cd website/html_page
                    java -jar /opt/vnu/dist/vnu.jar index.html
                """
            }
        }
        stage('Static page markup') {
            steps {
                sh """
                    cd website/html_page
                    sed -i 's%<em><strong>D</strong></em>%<em><strong>S</strong></em>%g' index.html
                """
            }
        }
        stage('Publish page') {
            steps {
                sh """
                    cd website/static_page
                    aws s3 cp index.html s3://project.prod/index.html
                    aws s3 cp about.html s3://project.prod/about.html
                    aws s3 cp architecture.html s3://project.prod/architecture.html
                    aws s3 cp cicd.html s3://project.prod/cicd.html
                    aws s3 cp project.html s3://project.prod/project.html
                """
            }
        }
    }
}